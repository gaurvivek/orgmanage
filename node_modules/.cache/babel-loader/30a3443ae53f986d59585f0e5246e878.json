{"ast":null,"code":"import _regeneratorRuntime from \"/var/www/html/reactjs/OrgManage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/var/www/html/reactjs/OrgManage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/var/www/html/reactjs/OrgManage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/var/www/html/reactjs/OrgManage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/reactjs/OrgManage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/var/www/html/reactjs/OrgManage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/var/www/html/reactjs/OrgManage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/var/www/html/reactjs/OrgManage/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/var/www/html/reactjs/OrgManage/src/components/Login/Login.jsx\";\nimport React, { Component, useReducer } from \"react\";\nimport { Button, FormGroup, TextField, Checkbox, FormControlLabel, Slide } from \"@material-ui/core\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { Link } from \"react-router-dom\";\nimport \"assets/css/login.css\";\nimport logo from \"assets/img/front-logo.png\";\nimport { basePath, baseRoutes } from \"base-routes\";\nimport { FormErrors } from \"./FormErrors\";\nimport fetch from \"isomorphic-fetch\";\nimport { store } from \"react-notifications-component\";\nimport { userService } from \"_services/user.service\";\nimport enMsg from \"__helpers/locale/en/en\";\nimport { clientTokenHeader } from \"__helpers/auth-header\";\nimport { connect } from \"react-redux\";\nimport { userdata as _userdata, reduxLoad as _reduxLoad } from \"../../js/actions/index\";\nimport { DATA_LOADING } from \"__helpers/constants\";\nimport { USER_INFO, EMAIL_REGEX } from \"__helpers/constants\";\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    userdata: function userdata(userdataVal) {\n      return dispatch(_userdata(userdataVal));\n    },\n    reduxLoad: function reduxLoad(reduxLoadVal) {\n      return dispatch(_reduxLoad(reduxLoadVal));\n    }\n  };\n}\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userdata: state.userdata,\n    reduxLoadFlag: state.reduxLoadFlag\n  };\n};\n\nvar LoginClass = /*#__PURE__*/function (_Component) {\n  _inherits(LoginClass, _Component);\n\n  var _super = _createSuper(LoginClass);\n\n  function LoginClass(props) {\n    var _this;\n\n    _classCallCheck(this, LoginClass);\n\n    _this = _super.call(this, props);\n\n    _this.handleUserInput = function (e) {\n      var name = e.target.name;\n      var value = e.target.value;\n\n      _this.setState(_defineProperty({}, name, value), function () {\n        _this.validateField(name, value);\n      });\n    };\n\n    _this.componentDidMount = function () {\n      var spinner = document.getElementById('loadingSpinner');\n\n      if (spinner && !spinner.hasAttribute('hidden')) {\n        spinner.setAttribute('hidden', 'true');\n      }\n\n      document.title = 'Login'; // add username and password in redux\n\n      if (!_this.state.userdata.userName) {\n        var data = {\n          userName: \"hruday@gmail.com\",\n          password: atob(\"hruday123\")\n        };\n\n        _this.props.userdata(data);\n\n        _this.setState({\n          userdata: data\n        });\n      }\n    };\n\n    _this.checkRememberMe = function (e) {\n      var checkBoxVal = _this.state.isRemember ? false : true;\n\n      _this.setState({\n        isRemember: checkBoxVal\n      });\n    };\n\n    _this.changePasswordType = function (e) {\n      var passwordType = _this.state.passwordType == \"password\" ? \"text\" : \"password\";\n\n      _this.setState({\n        passwordType: passwordType\n      });\n    };\n\n    userService.logout();\n\n    var _spinner = document.getElementById('loadingSpinner');\n\n    _this.state = {\n      email: \"\",\n      username: \"\",\n      password: \"\",\n      formErrors: {\n        username: \"\",\n        password: \"\"\n      },\n      emailValid: false,\n      passwordValid: false,\n      formValid: false,\n      loading: false,\n      isRemember: false,\n      passwordType: \"password\",\n      reduxLoadFlag: false,\n      spinner: _spinner,\n      userdata: _this.props.userdata\n    };\n    _this.clientAuthToken = null;\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_this));\n    _this.checkRememberMe = _this.checkRememberMe.bind(_assertThisInitialized(_this));\n    _this.getProfileData = _this.getProfileData.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(LoginClass, [{\n    key: \"validateField\",\n    value: function validateField(fieldName, value) {\n      var fieldValidationErrors = this.state.formErrors;\n      var emailValid = this.state.emailValid;\n      var passwordValid = this.state.passwordValid;\n\n      switch (fieldName) {\n        case \"email\":\n          emailValid = value.match(EMAIL_REGEX);\n          fieldValidationErrors.email = emailValid ? \"\" : enMsg.inValidUser;\n          emailValid = value.trim().length > 0 ? true : false;\n          fieldValidationErrors.email = emailValid ? \"\" : enMsg.inValidUser;\n          break;\n\n        case \"password\":\n          var error = \"\";\n          passwordValid = true;\n\n          if (!value.trim().length) {\n            passwordValid = false;\n            error = enMsg.passwordRequired;\n          } else if (value.length < 1) {\n            passwordValid = false;\n            error = \"Password too short\";\n          }\n\n          fieldValidationErrors.password = error;\n          break;\n\n        default:\n          emailValid = true;\n          passwordValid = true;\n          break;\n      }\n\n      this.setState({\n        formErrors: fieldValidationErrors,\n        emailValid: emailValid,\n        passwordValid: passwordValid\n      }, this.validateForm);\n    }\n  }, {\n    key: \"validateForm\",\n    value: function validateForm() {\n      return this.state.emailValid && this.state.passwordValid;\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function () {\n      var _handleSubmit = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        var _this2 = this;\n\n        var data, showNotification, user, response, notifiaciton;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.props.reduxLoad(false);\n                this.setState({\n                  loading: true\n                });\n                event.preventDefault();\n                data = {\n                  username: this.state.email,\n                  password: this.state.password\n                };\n                showNotification = {};\n                showNotification = {\n                  title: enMsg.loginFailedTitle,\n                  message: \"Login Access Denied.\",\n                  type: \"danger\"\n                };\n                userService.showNotification(showNotification);\n                user = {\n                  jti: jti,\n                  // accessToken: tokenType+\";\"+accessToken,\n                  accessToken: accessToken,\n                  refreshToken: refreshToken,\n                  tokenType: tokenType,\n                  userRole: userRole\n                };\n                localStorage.setItem(\"user\", JSON.stringify(user));\n                _context.prev = 9;\n                _context.next = 12;\n                return fetch(this.state.apiPath, {\n                  method: \"POST\",\n                  hheaders: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                  },\n                  headers: clientTokenHeader(),\n                  body: JSON.stringify(data),\n                  data: JSON.stringify(data)\n                }).then(function (response) {\n                  if (response.status === 400) {\n                    showNotification = {\n                      title: enMsg.loginFailedTitle,\n                      message: enMsg.inValidCredentials,\n                      type: \"danger\"\n                    };\n                  } else if (response.status === 401) {\n                    showNotification = {\n                      title: enMsg.loginFailedTitle,\n                      message: \"Login Access Denied.\",\n                      type: \"danger\"\n                    };\n                  } else if (response.ok) {} else {\n                    showNotification = {\n                      title: enMsg.loginFailedTitle,\n                      message: enMsg.inValidCredentials,\n                      type: \"danger\"\n                    };\n                    var error = new Error(response.statusText);\n                  }\n\n                  return response.json(); // return response.text();\n                }).then(function (data) {\n                  if (data.status == 401) {\n                    showNotification = {\n                      title: enMsg.loginFailedTitle,\n                      message: data.detail,\n                      type: \"danger\"\n                    };\n                  }\n\n                  var accessToken = data.access_token;\n                  var jti = data.jti;\n                  var refreshToken = data.refresh_token;\n                  var tokenType = data.token_type;\n\n                  if (accessToken !== undefined) {\n                    var _userRole = \"other\";\n\n                    if (_this2.state.email == \"admin\" || _this2.state.email == \"maxmrj.admin@yopmail.com\" || _this2.state.email == \"maxadmin\" || _this2.state.email == \"maxadmin@yopmail.com\") {\n                      _userRole = \"admin\";\n                    }\n\n                    var _user = {\n                      jti: jti,\n                      // accessToken: tokenType+\";\"+accessToken,\n                      accessToken: accessToken,\n                      refreshToken: refreshToken,\n                      tokenType: tokenType,\n                      userRole: _userRole\n                    };\n                    localStorage.setItem(\"user\", JSON.stringify(_user));\n\n                    _this2.getProfileData(_user);\n\n                    return;\n                  }\n\n                  return true;\n                })[\"catch\"](function (error) {\n                  showNotification = {\n                    title: enMsg.loginFailedTitle,\n                    message: enMsg.inValidCredentials,\n                    type: \"danger\"\n                  };\n                  return response;\n                });\n\n              case 12:\n                response = _context.sent;\n                _context.next = 18;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context[\"catch\"](9);\n                showNotification = {\n                  title: enMsg.loginFailedTitle,\n                  message: enMsg.inValidCredentials,\n                  type: \"danger\"\n                };\n\n              case 18:\n                if (showNotification !== undefined && showNotification.title !== undefined && showNotification.message !== undefined && showNotification.type !== undefined) {\n                  this.notificationID = store.removeNotification(this.notificationID);\n\n                  if (this.notificationID == undefined) {\n                    notifiaciton = {\n                      title: showNotification.title,\n                      message: showNotification.message,\n                      type: showNotification.type\n                    };\n                    notifiaciton = Object.assign(NotificationOptions, notifiaciton);\n                    this.notificationID = store.addNotification(notifiaciton);\n                  }\n\n                  userService.showNotification(showNotification);\n                }\n\n                this._isMounted && this.setState({\n                  loading: false\n                });\n\n              case 20:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[9, 15]]);\n      }));\n\n      function handleSubmit(_x) {\n        return _handleSubmit.apply(this, arguments);\n      }\n\n      return handleSubmit;\n    }()\n  }, {\n    key: \"getProfileData\",\n    value: function () {\n      var _getProfileData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(userToken) {\n        var showNotification, userResp, firstName, lastName, imageRef, createdById, newUser, usrType, bbaCondition, termNcondition, userInfo;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                showNotification = {};\n\n                if (!userToken) {\n                  _context2.next = 11;\n                  break;\n                }\n\n                this.setState({\n                  loading: true\n                });\n                this.setState({\n                  reduxLoadFlag: false\n                });\n                _context2.next = 6;\n                return userService.fetchProfile();\n\n              case 6:\n                userResp = _context2.sent;\n\n                if (userResp && userResp.firstName) {\n                  firstName = userResp.firstName;\n                  lastName = userResp.lastName;\n                  imageRef = userResp.imageUrl;\n                  createdById = userResp.id;\n                  newUser = userResp.newUser;\n                  usrType = userResp.authorities;\n                  bbaCondition = userResp.bbaCondition;\n                  termNcondition = userResp.termNcondition;\n                  userInfo = {\n                    firstName: firstName,\n                    lastName: lastName,\n                    imageRef: imageRef,\n                    newUser: newUser,\n                    createdById: createdById,\n                    usrType: usrType[0],\n                    termNcondition: termNcondition,\n                    bbaCondition: bbaCondition,\n                    provider: userResp.provider ? userResp.provider : [],\n                    dischargePlanner: userResp.dischargeplanner ? userResp.dischargeplanner : []\n                  }; // this.props.addUSerUInfo(userInfo);\n\n                  localStorage.setItem(USER_INFO, JSON.stringify(userInfo));\n\n                  if (usrType[0] == ADMIN_USER) {\n                    this.createCookie('_max_mrj', '_login_max_mrj_a', 0);\n                    this.props.history.replace(baseRoutes.dashboard.path);\n                    window.location.replace(baseRoutes.dashboard.path);\n                  } else if (usrType[0] == DP_USER) {\n                    this.createCookie('_max_mrj', '_login_max_mrj_dp', 0);\n                    this.props.history.replace(dpBaseRoutes.dashboard.path, \"/\");\n                    window.location.replace(dpBaseRoutes.dashboard.path);\n                  } else if (usrType[0] == PROVIDER_USER) {\n                    this.createCookie('_max_mrj', '_login_max_mrj_pu', 0);\n                    this.props.history.replace(providerUserBaseRoutes.dashboard.path);\n                    window.location.replace(providerUserBaseRoutes.dashboard.path);\n                  } else if (usrType[0] == PROVIDER) {\n                    this.createCookie('_max_mrj', '_login_max_mrj_p', 0);\n                    this.props.history.replace(providerBaseRoutes.dashboard.path);\n                    window.location.replace(providerBaseRoutes.dashboard.path);\n                  } else {\n                    showNotification = {\n                      title: \"Login\",\n                      message: \"Login Access Denied\",\n                      type: \"dander\"\n                    };\n                  }\n\n                  this.props.reduxLoad(true);\n                  this.state.spinner.setAttribute('hidden', 'true');\n                  userService.showNotification(showNotification);\n                  this.setState({\n                    loading: false\n                  });\n                } else {\n                  showNotification = {\n                    title: \"Login\",\n                    message: \"Login Access Denied\",\n                    type: \"dander\"\n                  };\n                  this.state.spinner.setAttribute('hidden', 'true');\n                  userService.showNotification(showNotification);\n                  this.setState({\n                    loading: false\n                  });\n                }\n\n                showNotification = {\n                  title: \"Login\",\n                  message: \"Login Access Denied\",\n                  type: \"dander\"\n                };\n                this.state.spinner.setAttribute('hidden', 'true');\n                userService.showNotification(showNotification);\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getProfileData(_x2) {\n        return _getProfileData.apply(this, arguments);\n      }\n\n      return getProfileData;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login-outer-cover\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login-cover gray-bg-color\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"logo-content loginLogoMain\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loginLogoInner\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: logo,\n        alt: \"logo\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login-inner-cover\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"login-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Login\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        label: \"User ID/Email Address *\",\n        type: \"email\",\n        name: \"email\",\n        \"data-validators\": \"isRequired,isAlpha\",\n        onChange: function onChange(event) {\n          return _this3.handleUserInput(event);\n        },\n        value: this.state.email,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(FormErrors, {\n        show: !this.state.emailValid,\n        formErrors: this.state.formErrors,\n        fieldName: \"email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        className: \"possword-input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(TextField, {\n        label: \"Password *\",\n        type: this.state.passwordType,\n        name: \"password\",\n        \"data-validators\": \"isRequired,isAlpha\",\n        onChange: function onChange(event) {\n          return _this3.handleUserInput(event);\n        },\n        value: this.state.password,\n        inputProps: {\n          maxLength: MAX_PASSWORD_LENGTH\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(FormErrors, {\n        show: !this.state.passwordValid,\n        formErrors: this.state.formErrors,\n        fieldName: \"password\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 21\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"action-btns d-flex justify-content-between\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"loginPageLink forgot-link\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"#\",\n        onClick: this.openForgotModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 23\n        }\n      }, \"Forgot Password?\"))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"action-btns\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        className: this.state.loading ? \"buttonSuccess btn1\" : \"btn1\",\n        disabled: this.state.loading || !this.validateForm(),\n        type: \"submit\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 21\n        }\n      }, \"Login\", this.state.loading && /*#__PURE__*/React.createElement(CircularProgress, {\n        size: 24,\n        className: \"buttonProgress\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 412,\n          columnNumber: 25\n        }\n      })))))))));\n    }\n  }]);\n\n  return LoginClass;\n}(Component);\n\nexport var Login = connect(mapStateToProps, mapDispatchToProps)(LoginClass);\nexport default Login;","map":{"version":3,"sources":["/var/www/html/reactjs/OrgManage/src/components/Login/Login.jsx"],"names":["React","Component","useReducer","Button","FormGroup","TextField","Checkbox","FormControlLabel","Slide","CircularProgress","Link","logo","basePath","baseRoutes","FormErrors","fetch","store","userService","enMsg","clientTokenHeader","connect","userdata","reduxLoad","DATA_LOADING","USER_INFO","EMAIL_REGEX","mapDispatchToProps","dispatch","userdataVal","reduxLoadVal","mapStateToProps","state","reduxLoadFlag","LoginClass","props","handleUserInput","e","name","target","value","setState","validateField","componentDidMount","spinner","document","getElementById","hasAttribute","setAttribute","title","userName","data","password","atob","checkRememberMe","checkBoxVal","isRemember","changePasswordType","passwordType","logout","email","username","formErrors","emailValid","passwordValid","formValid","loading","clientAuthToken","handleSubmit","bind","getProfileData","fieldName","fieldValidationErrors","match","inValidUser","trim","length","error","passwordRequired","validateForm","event","preventDefault","showNotification","loginFailedTitle","message","type","user","jti","accessToken","refreshToken","tokenType","userRole","localStorage","setItem","JSON","stringify","apiPath","method","hheaders","headers","body","then","response","status","inValidCredentials","ok","Error","statusText","json","detail","access_token","refresh_token","token_type","undefined","notificationID","removeNotification","notifiaciton","Object","assign","NotificationOptions","addNotification","_isMounted","userToken","fetchProfile","userResp","firstName","lastName","imageRef","imageUrl","createdById","id","newUser","usrType","authorities","bbaCondition","termNcondition","userInfo","provider","dischargePlanner","dischargeplanner","ADMIN_USER","createCookie","history","replace","dashboard","path","window","location","DP_USER","dpBaseRoutes","PROVIDER_USER","providerUserBaseRoutes","PROVIDER","providerBaseRoutes","maxLength","MAX_PASSWORD_LENGTH","openForgotModal","Login"],"mappings":"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","sourcesContent":["import React, { Component, useReducer } from \"react\";\nimport { Button, FormGroup, TextField, Checkbox, FormControlLabel, Slide } from \"@material-ui/core\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { Link } from \"react-router-dom\";\nimport \"assets/css/login.css\";\nimport logo from \"assets/img/front-logo.png\";\nimport { basePath, baseRoutes } from \"base-routes\";\nimport { FormErrors } from \"./FormErrors\";\nimport fetch from \"isomorphic-fetch\";\nimport { store } from \"react-notifications-component\";\nimport { userService } from \"_services/user.service\";\nimport enMsg from \"__helpers/locale/en/en\";\nimport { clientTokenHeader } from \"__helpers/auth-header\";\nimport { connect } from \"react-redux\";\nimport {\n  userdata,\n  reduxLoad,\n} from \"../../js/actions/index\";\nimport { DATA_LOADING } from \"__helpers/constants\";\nimport { USER_INFO, EMAIL_REGEX } from \"__helpers/constants\";\n\nfunction mapDispatchToProps(dispatch) {\n  return {\n    userdata: userdataVal => dispatch(userdata(userdataVal)),\n    reduxLoad: reduxLoadVal => dispatch(reduxLoad(reduxLoadVal)),\n  };\n}\nconst mapStateToProps = state => {\n  return {\n    userdata: state.userdata,\n    reduxLoadFlag: state.reduxLoadFlag,\n  };\n};\nclass LoginClass extends Component {\n  constructor(props) {\n    super(props);\n    userService.logout();\n    let spinner = document.getElementById('loadingSpinner');\n    this.state = {\n      email: \"\",\n      username: \"\",\n      password: \"\",\n      formErrors: { username: \"\", password: \"\" },\n      emailValid: false,\n      passwordValid: false,\n      formValid: false,\n      loading: false,\n      isRemember: false,\n      passwordType: \"password\",\n      reduxLoadFlag: false,\n      spinner: spinner,\n      userdata: this.props.userdata,\n    };\n    this.clientAuthToken = null;\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.checkRememberMe = this.checkRememberMe.bind(this);\n    this.getProfileData = this.getProfileData.bind(this);\n  }\n\n  handleUserInput = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n\n    this.setState({ [name]: value }, () => {\n      this.validateField(name, value);\n    });\n  };\n  validateField(fieldName, value) {\n    let fieldValidationErrors = this.state.formErrors;\n    let emailValid = this.state.emailValid;\n    let passwordValid = this.state.passwordValid;\n\n    switch (fieldName) {\n      case \"email\":\n        emailValid = value.match(EMAIL_REGEX);\n        fieldValidationErrors.email = emailValid ? \"\" : enMsg.inValidUser;\n        emailValid = value.trim().length > 0 ? true : false;\n        fieldValidationErrors.email = emailValid\n          ? \"\"\n          : enMsg.inValidUser;\n        break;\n      case \"password\":\n        let error = \"\";\n        passwordValid = true;\n        if (!value.trim().length) {\n          passwordValid = false;\n          error = enMsg.passwordRequired;\n        } else if (value.length < 1) {\n          passwordValid = false;\n          error = \"Password too short\";\n        }\n        fieldValidationErrors.password = error;\n        break;\n      default:\n        emailValid = true;\n        passwordValid = true;\n        break;\n    }\n    this.setState(\n      {\n        formErrors: fieldValidationErrors,\n        emailValid: emailValid,\n        passwordValid: passwordValid\n      },\n      this.validateForm\n    );\n  }\n  validateForm() {\n    return this.state.emailValid && this.state.passwordValid;\n  }\n  componentDidMount = () => {\n    const spinner = document.getElementById('loadingSpinner');\n    if (spinner && !spinner.hasAttribute('hidden')) {\n      spinner.setAttribute('hidden', 'true');\n    }\n    document.title = 'Login';\n\n    // add username and password in redux\n    if (!this.state.userdata.userName){\n      const data = {\n        userName: \"hruday@gmail.com\", password: atob(\"hruday123\")\n      }\n      this.props.userdata(data)\n      this.setState({\n        userdata: data,\n      })\n    }\n\n  };\n  async handleSubmit(event) {\n    this.props.reduxLoad(false);\n    this.setState({ loading: true });\n    event.preventDefault();\n    const data = {\n      username: this.state.email,\n      password: this.state.password,\n    };\n    let showNotification = {};\n    showNotification = {\n      title: enMsg.loginFailedTitle,\n      message: \"Login Access Denied.\",\n      type: \"danger\"\n    };\n    userService.showNotification(showNotification)\n    let user = {\n      jti: jti,\n      // accessToken: tokenType+\";\"+accessToken,\n      accessToken: accessToken,\n      refreshToken: refreshToken,\n      tokenType: tokenType,\n      userRole: userRole,\n    };\n    localStorage.setItem(\"user\", JSON.stringify(user));\n\n\n\n    try {\n      const response = await fetch(this.state.apiPath, {\n        method: \"POST\",\n        hheaders: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        headers: clientTokenHeader(),\n        body: JSON.stringify(data),\n        data: JSON.stringify(data)\n      })\n        .then(response => {\n          if (response.status === 400) {\n            showNotification = {\n              title: enMsg.loginFailedTitle,\n              message: enMsg.inValidCredentials,\n              type: \"danger\"\n            };\n          } else if (response.status === 401) {\n            showNotification = {\n              title: enMsg.loginFailedTitle,\n              message: \"Login Access Denied.\",\n              type: \"danger\"\n            };\n          } else if (response.ok) {\n          } else {\n            showNotification = {\n              title: enMsg.loginFailedTitle,\n              message: enMsg.inValidCredentials,\n              type: \"danger\"\n            };\n            let error = new Error(response.statusText);\n          }\n          return response.json();\n          // return response.text();\n        })\n        .then(data => {\n          if (data.status == 401) {\n            showNotification = {\n              title: enMsg.loginFailedTitle,\n              message: data.detail,\n              type: \"danger\"\n            };\n          }\n          let accessToken = data.access_token;\n          let jti = data.jti;\n          let refreshToken = data.refresh_token;\n          let tokenType = data.token_type;\n          if (accessToken !== undefined) {\n            let userRole = \"other\"\n            if (this.state.email == \"admin\" || this.state.email == \"maxmrj.admin@yopmail.com\" || this.state.email == \"maxadmin\" || this.state.email == \"maxadmin@yopmail.com\") {\n              userRole = \"admin\"\n            }\n            let user = {\n              jti: jti,\n              // accessToken: tokenType+\";\"+accessToken,\n              accessToken: accessToken,\n              refreshToken: refreshToken,\n              tokenType: tokenType,\n              userRole: userRole,\n            };\n            localStorage.setItem(\"user\", JSON.stringify(user));\n            this.getProfileData(user);\n            return;\n          }\n          return true;\n        })\n        .catch(error => {\n          showNotification = {\n            title: enMsg.loginFailedTitle,\n            message: enMsg.inValidCredentials,\n            type: \"danger\"\n          };\n\n          return response;\n        });\n\n    } catch (error) {\n      showNotification = {\n        title: enMsg.loginFailedTitle,\n        message: enMsg.inValidCredentials,\n        type: \"danger\"\n      };\n    }\n    if (\n      showNotification !== undefined &&\n      showNotification.title !== undefined &&\n      showNotification.message !== undefined &&\n      showNotification.type !== undefined\n    ) {\n      this.notificationID = store.removeNotification(this.notificationID);\n      if (this.notificationID == undefined) {\n        let notifiaciton = {\n          title: showNotification.title,\n          message: showNotification.message,\n          type: showNotification.type\n        };\n        notifiaciton = Object.assign(NotificationOptions, notifiaciton);\n        this.notificationID = store.addNotification(notifiaciton);\n      }\n      userService.showNotification(showNotification)\n    }\n\n    this._isMounted && this.setState({ loading: false });\n  }\n  async getProfileData(userToken) {\n    let showNotification = {};\n    if (userToken) {\n      this.setState({ loading: true });\n      this.setState({ reduxLoadFlag: false })\n      let userResp = await userService.fetchProfile();\n      if (userResp && userResp.firstName) {\n        let firstName = userResp.firstName;\n        let lastName = userResp.lastName;\n        let imageRef = userResp.imageUrl;\n        let createdById = userResp.id;\n        let newUser = userResp.newUser;\n        let usrType = userResp.authorities;\n        let bbaCondition = userResp.bbaCondition;\n        let termNcondition = userResp.termNcondition;\n        let userInfo = {\n          firstName: firstName,\n          lastName: lastName,\n          imageRef: imageRef,\n          newUser: newUser,\n          createdById: createdById,\n          usrType: usrType[0],\n          termNcondition: termNcondition,\n          bbaCondition: bbaCondition,\n          provider: (userResp.provider) ? userResp.provider : [],\n          dischargePlanner: (userResp.dischargeplanner) ? userResp.dischargeplanner : []\n        };\n        // this.props.addUSerUInfo(userInfo);\n        localStorage.setItem(USER_INFO, JSON.stringify(userInfo));\n        if (usrType[0] == ADMIN_USER) {\n          this.createCookie('_max_mrj', '_login_max_mrj_a', 0)\n          this.props.history.replace(baseRoutes.dashboard.path);\n          window.location.replace(baseRoutes.dashboard.path);\n        } else if (usrType[0] == DP_USER) {\n          this.createCookie('_max_mrj', '_login_max_mrj_dp', 0)\n          this.props.history.replace(dpBaseRoutes.dashboard.path, \"/\");\n          window.location.replace(dpBaseRoutes.dashboard.path);\n        } else if (usrType[0] == PROVIDER_USER) {\n          this.createCookie('_max_mrj', '_login_max_mrj_pu', 0)\n          this.props.history.replace(providerUserBaseRoutes.dashboard.path);\n          window.location.replace(providerUserBaseRoutes.dashboard.path);\n        } else if (usrType[0] == PROVIDER) {\n          this.createCookie('_max_mrj', '_login_max_mrj_p', 0)\n          this.props.history.replace(providerBaseRoutes.dashboard.path);\n          window.location.replace(providerBaseRoutes.dashboard.path);\n        } else {\n          showNotification = {\n            title: \"Login\",\n            message: \"Login Access Denied\",\n            type: \"dander\"\n          };\n        }\n        this.props.reduxLoad(true);\n        this.state.spinner.setAttribute('hidden', 'true');\n        userService.showNotification(showNotification)\n        this.setState({ loading: false });\n      } else {\n        showNotification = {\n          title: \"Login\",\n          message: \"Login Access Denied\",\n          type: \"dander\"\n        };\n        this.state.spinner.setAttribute('hidden', 'true');\n        userService.showNotification(showNotification);\n        this.setState({ loading: false });\n      }\n      showNotification = {\n        title: \"Login\",\n        message: \"Login Access Denied\",\n        type: \"dander\"\n      };\n      this.state.spinner.setAttribute('hidden', 'true');\n      userService.showNotification(showNotification)\n    }\n    // this.props.addUSerUInfo(users);\n  }\n  checkRememberMe = e => {\n    let checkBoxVal = (this.state.isRemember) ? false : true;\n    this.setState({ isRemember: checkBoxVal });\n  }\n  changePasswordType = e => {\n    let passwordType = (this.state.passwordType == \"password\") ? \"text\" : \"password\";\n    this.setState({\n      passwordType: passwordType\n    });\n  }\n  render() {\n    return (\n      <div className=\"login-outer-cover\">\n        <div className=\"login-cover gray-bg-color\">\n          <div className=\"logo-content loginLogoMain\">\n            <div className=\"loginLogoInner\">\n              <img src={logo} alt=\"logo\" />\n            </div>\n          </div>\n          <div className=\"login-inner-cover\">\n            <div className=\"login-content\">\n              <div className=\"Login\">\n                <form onSubmit={this.handleSubmit} noValidate>\n                  <FormGroup>\n                    {/* <InputLabel>Email Address</InputLabel> */}\n                    <TextField\n                      label=\"User ID/Email Address *\"\n                      type=\"email\"\n                      name=\"email\"\n                      data-validators=\"isRequired,isAlpha\"\n                      onChange={event => this.handleUserInput(event)}\n                      value={this.state.email}\n                    />\n                    <FormErrors\n                      show={!this.state.emailValid}\n                      formErrors={this.state.formErrors}\n                      fieldName=\"email\"\n                    />\n                  </FormGroup>\n                  <FormGroup className=\"possword-input\">\n                    <TextField\n                      label=\"Password *\"\n                      type={this.state.passwordType}\n                      name=\"password\"\n                      data-validators=\"isRequired,isAlpha\"\n                      onChange={event => this.handleUserInput(event)}\n                      value={this.state.password}\n                      inputProps={{ maxLength: MAX_PASSWORD_LENGTH }}\n                    />\n                    <FormErrors\n                      show={!this.state.passwordValid}\n                      formErrors={this.state.formErrors}\n                      fieldName=\"password\"\n                    />\n                  </FormGroup>\n                  <div className=\"action-btns d-flex justify-content-between\">\n                    <div className=\"loginPageLink forgot-link\">\n                      <Link\n                        to=\"#\"\n                        onClick={this.openForgotModal}\n                      >\n                        Forgot Password?\n                      </Link>\n                    </div>\n                  </div>\n                  <div className=\"action-btns\">\n                    <Button\n                      color=\"primary\"\n                      className={this.state.loading ? \"buttonSuccess btn1\" : \"btn1\"}\n                      disabled={this.state.loading || !this.validateForm()}\n                      type=\"submit\"\n                    >\n                      Login\n                      {this.state.loading && (\n                        <CircularProgress\n                          size={24}\n                          className=\"buttonProgress\"\n                        />\n                      )}\n                    </Button>\n                  </div>\n                </form>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport const Login = connect(\n  mapStateToProps, mapDispatchToProps\n)(LoginClass);\nexport default Login;"]},"metadata":{},"sourceType":"module"}